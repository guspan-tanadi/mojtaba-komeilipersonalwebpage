<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Examine your knowledge</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Don't use this in production: -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div id="root"></div>
  <script type="text/babel">

    function PracticeApp() {

      const QuestionsContent = [
        // 1
        { 'q': 'This is the first question.', 'a': (x) => { return x === "Hi"; } },
        // 2
        { 'q': 'Now the second question.', 'a': (x) => { alert(x) } },
      ]

      const [step, setStep] = React.useState(1);

      console.log("Step is " + step);

      return (
        <div>
          <h1>
            Test your Python knowledge üêç
          </h1>
          <hr></hr>
          <div className="game_instruction">
            <p>
              ü§î Write a function that does what the question asks.
            </p>
            <p>
              üßê Run you function and cop/paste its output in the answer box.
            </p>
            <p>
              üòé If your answer is correct, you will see a button to go to the next level.
            </p>
          </div>
          <ProgressBar step={step} />
          <Question step={step} setStep={setStep} content={QuestionsContent.at(step - 1)} />
        </div>
      )
    }

    function Question({ step, setStep, content }) {
      const responseHandleFunction = content.a
      return (
        <div>
          <h1>
            {"Question # " + step}
          </h1>
          <p>
            {content.q}
          </p>
          <ResponseBar responseChecker={responseHandleFunction} step={step} setStep={setStep} />
        </div>
      )
    }

    function ResponseBar({ responseChecker, step, setStep }) {
      return (<form action="#" onSubmit={() => { 
        if (responseChecker(document.getElementById("answer").value)) {
          setStep(step+1);
        } else {
          alert("Wrong answer, please try again!");
        }
      }}>
        <div className="form-group">
          <label htmlFor="answer">Your answer:</label>
          <input type="text" autoComplete="off" className="form-control" id="answer" placeholder="Answer"></input>
          <small id="emailHelp" className="form-text text-muted">Copy and paste the output of your function here.</small>
        </div>
        <button type="submit" className="btn btn-primary">Submit</button>
      </form>)
    }

    function ProgressBar({ step }) {
      return (
        <div id="knowledge_test_progress_bar">
          <label htmlFor="file">Questions completed:  </label>
          <progress id="file" value={step} max="20"> step </progress>
        </div>
      )
    }

    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(<PracticeApp />);

  </script>
</body>

</html>